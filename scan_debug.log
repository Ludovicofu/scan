2025-05-06 16:44:12,983 - INFO - ===== 扫描进度调试开始 =====
2025-05-06 16:44:12,985 - INFO - 开始连接WebSocket服务...
2025-05-06 16:44:13,035 - INFO - 成功连接到数据收集WebSocket服务
2025-05-06 16:44:13,051 - INFO - 成功连接到漏洞扫描WebSocket服务
2025-05-06 16:44:13,051 - INFO - 发送开始扫描命令...
2025-05-06 16:44:13,051 - INFO - 成功发送数据收集开始扫描命令
2025-05-06 16:44:13,051 - INFO - 成功发送漏洞扫描开始扫描命令
2025-05-06 16:44:13,051 - INFO - 等待5秒以接收初始消息...
2025-05-06 16:44:13,051 - INFO - 开始监听 数据收集 的进度事件...
2025-05-06 16:44:13,051 - INFO - 开始监听 漏洞扫描 的进度事件...
2025-05-06 16:44:13,051 - INFO - 接收到 数据收集 消息: {"type": "settings", "data": {"id": 1, "use_proxy": true, "proxy_address": "http://localhost:7890", "scan_timeout": 10, "max_concurrent_scans": 5}}...
2025-05-06 16:44:13,051 - INFO - 接收到 数据收集 消息: {"type": "skip_targets", "data": [{"id": 2, "target": "pikachu", "description": ""}, {"id": 1, "target": "www.google.com", "description": ""}]}...
2025-05-06 16:44:13,055 - INFO - 接收到 漏洞扫描 消息: {"type": "settings", "data": {"id": 1, "use_proxy": true, "proxy_address": "http://localhost:7890", "scan_timeout": 10, "max_concurrent_scans": 5}}...
2025-05-06 16:44:13,068 - INFO - 接收到 漏洞扫描 消息: {"type": "skip_targets", "data": [{"id": 2, "target": "pikachu", "description": ""}, {"id": 1, "target": "www.google.com", "description": ""}]}...
2025-05-06 16:44:13,074 - INFO - 接收到 数据收集 消息: {"type": "scan_status", "status": "started", "message": "\u626b\u63cf\u5df2\u5f00\u59cb"}...
2025-05-06 16:44:13,079 - INFO - 接收到 漏洞扫描 消息: {"type": "scan_status", "status": "started", "message": "\u626b\u63cf\u5df2\u5f00\u59cb"}...
2025-05-06 16:44:18,048 - INFO - 发送测试HTTP请求到 http://example.com...
2025-05-06 16:44:18,618 - INFO - 成功获取测试页面，状态码: 200
2025-05-06 16:44:18,631 - INFO - 成功发送代理数据，响应: {"status": "success"}
2025-05-06 16:44:18,633 - INFO - 等待20秒以接收扫描进度更新...
2025-05-06 16:44:19,568 - INFO - 接收到 数据收集 消息: {"type": "scan_progress", "data": {"status": "scanning", "message": "\u6b63\u5728\u626b\u63cf example.com", "url": "http://example.com", "progress": 0}}...
2025-05-06 16:44:19,569 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "scanning", "message": "正在扫描 example.com", "url": "http://example.com", "progress": 0}}
2025-05-06 16:44:19,584 - INFO - 接收到 数据收集 消息: {"type": "scan_progress", "data": {"status": "scanning", "message": "\u6b63\u5728\u626b\u63cf example.com", "url": "http://example.com", "progress": 0}}...
2025-05-06 16:44:19,584 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "scanning", "message": "正在扫描 example.com", "url": "http://example.com", "progress": 0}}
2025-05-06 16:44:19,592 - INFO - 接收到 数据收集 消息: {"type": "scan_progress", "data": {"status": "scanning", "message": "\u6b63\u5728\u626b\u63cf example.com", "url": "http://example.com", "progress": 0}}...
2025-05-06 16:44:19,592 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "scanning", "message": "正在扫描 example.com", "url": "http://example.com", "progress": 0}}
2025-05-06 16:44:19,595 - INFO - 接收到 漏洞扫描 消息: {"type": "scan_progress", "data": {"status": "scanning", "message": "\u6b63\u5728\u626b\u63cf example.com", "url": "http://example.com", "progress": 0}}...
2025-05-06 16:44:19,595 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "scanning", "message": "正在扫描 example.com", "url": "http://example.com", "progress": 0}}
2025-05-06 16:44:19,596 - INFO - 接收到 漏洞扫描 消息: {"type": "scan_progress", "data": {"status": "scanning", "message": "\u6b63\u5728\u626b\u63cf example.com", "url": "http://example.com", "progress": 0}}...
2025-05-06 16:44:19,596 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "scanning", "message": "正在扫描 example.com", "url": "http://example.com", "progress": 0}}
2025-05-06 16:44:19,596 - INFO - 接收到 漏洞扫描 消息: {"type": "scan_progress", "data": {"status": "scanning", "message": "\u6b63\u5728\u626b\u63cf example.com", "url": "http://example.com", "progress": 0}}...
2025-05-06 16:44:19,597 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "scanning", "message": "正在扫描 example.com", "url": "http://example.com", "progress": 0}}
2025-05-06 16:44:19,597 - INFO - 接收到 漏洞扫描 消息: {"type": "scan_progress", "data": {"status": "completed", "message": "\u626b\u63cf\u5b8c\u6210: example.com, \u53d1\u73b0 0 \u4e2a\u6f0f\u6d1e", "url": "http://example.com", "progress": 100}}...
2025-05-06 16:44:19,597 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "completed", "message": "扫描完成: example.com, 发现 0 个漏洞", "url": "http://example.com", "progress": 100}}
2025-05-06 16:44:19,598 - INFO - 接收到 漏洞扫描 消息: {"type": "scan_progress", "data": {"status": "completed", "message": "\u626b\u63cf\u5b8c\u6210: example.com, \u53d1\u73b0 0 \u4e2a\u6f0f\u6d1e", "url": "http://example.com", "progress": 100}}...
2025-05-06 16:44:19,598 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "completed", "message": "扫描完成: example.com, 发现 0 个漏洞", "url": "http://example.com", "progress": 100}}
2025-05-06 16:44:19,599 - INFO - 接收到 漏洞扫描 消息: {"type": "scan_progress", "data": {"status": "completed", "message": "\u626b\u63cf\u5b8c\u6210: example.com, \u53d1\u73b0 0 \u4e2a\u6f0f\u6d1e", "url": "http://example.com", "progress": 100}}...
2025-05-06 16:44:19,599 - INFO - 检测到进度事件: {"type": "scan_progress", "data": {"status": "completed", "message": "扫描完成: example.com, 发现 0 个漏洞", "url": "http://example.com", "progress": 100}}
2025-05-06 16:44:38,657 - INFO - 检查扫描器代码路径...
2025-05-06 16:44:38,658 - INFO - 文件存在: data_collection/scanner.py
2025-05-06 16:44:38,659 - INFO - 在 data_collection/scanner.py 第 173 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,659 - INFO - 在 data_collection/scanner.py 第 203 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,659 - INFO - 在 data_collection/scanner.py 第 222 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,659 - INFO - 文件存在: data_collection/consumers.py
2025-05-06 16:44:38,660 - INFO - 在 data_collection/consumers.py 第 171 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,661 - INFO - 文件存在: vuln_scan/scanner.py
2025-05-06 16:44:38,661 - INFO - 在 vuln_scan/scanner.py 第 230 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,662 - INFO - 在 vuln_scan/scanner.py 第 374 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,662 - INFO - 在 vuln_scan/scanner.py 第 395 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,662 - INFO - 文件存在: vuln_scan/consumers.py
2025-05-06 16:44:38,662 - INFO - 在 vuln_scan/consumers.py 第 144 行找到scan_progress: 'type': 'scan_progress',
2025-05-06 16:44:38,662 - INFO - 检查进度计算逻辑...
2025-05-06 16:44:38,663 - INFO - 进度值序列: [0, 0, 0, 0, 0, 0, 100, 100, 100]
2025-05-06 16:44:38,663 - INFO - 生成调试报告...
2025-05-06 16:44:38,663 - INFO - 分析WebSocket消息...
2025-05-06 16:44:38,663 - INFO - 消息类型分布: {'settings': 2, 'skip_targets': 2, 'scan_status': 2, 'scan_progress': 9}
2025-05-06 16:44:38,663 - INFO - 进度消息 1: 状态=scanning, 进度=0
2025-05-06 16:44:38,665 - INFO - 调试报告已保存到 scan_debug_report.json
2025-05-06 16:44:38,665 - INFO - 
==== 调试报告摘要 ====
2025-05-06 16:44:38,665 - INFO - WebSocket连接状态: 数据收集=True, 漏洞扫描=True
2025-05-06 16:44:38,665 - INFO - 总消息数: 15
2025-05-06 16:44:38,665 - INFO - 进度事件数: 9
2025-05-06 16:44:38,665 - INFO - 发现问题: 扫描状态为scanning但进度值始终为0
2025-05-06 16:44:44,190 - ERROR - 数据收集 监听出错: sent 1000 (OK); then received 1000 (OK)
2025-05-06 16:44:44,194 - ERROR - 漏洞扫描 监听出错: sent 1000 (OK); then received 1000 (OK)
2025-05-06 16:44:44,196 - INFO - ===== 扫描进度调试完成 =====
